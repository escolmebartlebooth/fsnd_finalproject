function locationmodel(o){var n=this;n.name=o.name,n.ground=o.ground,n.location=o.location,n.champions=o.champions,n.marker=new google.maps.Marker({position:{lat:n.location.lat,lng:n.location.lng},icon:icons.locationnormal,map:map,title:n.name+" "+n.ground,location:n}),n.infowindow=new google.maps.InfoWindow({content:"<div><h3>"+n.name+":<h3><p># of championships: "+n.champions+"<p></div>"})}function locationsVM(){var o=this;o.isOpen=ko.observable(!1),o.toggle=function(){o.isOpen(!o.isOpen())},o.mapStyle=ko.observable(),o.toggleMap=function(){"roadmap"===map.getMapTypeId()?map.setMapTypeId("styled_map"):map.setMapTypeId("roadmap")},o.locations=ko.observableArray([]),o.selectedlocation=ko.observable(null),o.locationAnimate=function(){o.selectedlocation().setAnimation(google.maps.Animation.BOUNCE),o.selectedlocation().icon=icons.locationselected,o.selectedlocation().location.infowindow.open(map,o.selectedlocation())},o.locationUnAnimate=function(){o.selectedlocation().setAnimation(null),o.selectedlocation().icon=icons.locationnormal,o.selectedlocation().location.infowindow.close()},o.makeselection=function(n){o.selectedlocation()===n?(o.locationUnAnimate(),o.selectedlocation(null)):null!==o.selectedlocation()?(o.locationUnAnimate(),o.selectedlocation(n),o.locationAnimate()):(o.selectedlocation(n),o.locationAnimate())},o.markerClick=function(){o.makeselection(this)},o.clicklocation=function(){o.makeselection(this.marker)},o.filtervalue=ko.observable(""),o.dofilter=function(){console.log(o.filtervalue())};var n,e=[],a=new google.maps.LatLngBounds;locationdata.forEach(function(t){(n=new locationmodel(t)).marker.addListener("click",o.markerClick),e.push(n),a.extend(n.marker.position)}),o.locations(e),map.fitBounds(a)}function initMap(){var o=new google.maps.StyledMapType(mapstyle,{name:"locations"});(map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:initialCenter,disableDefaultUI:!0})).mapTypes.set("styled_map",o),map.setMapTypeId("styled_map"),ko.applyBindings(new locationsVM)}var map,initialCenter={lat:53.817265,lng:-1.5848782},iconroot="http://maps.google.com/mapfiles/ms/icons/",icons={locationselected:iconroot+"ylw-pushpin.png",locationnormal:iconroot+"red-pushpin.png"};